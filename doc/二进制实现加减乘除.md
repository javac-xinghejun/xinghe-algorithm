# 如何用二进制实现加减乘除
要求：不使用加（+）减（-）乘（*）除（/）取余（%）实现两个int的加减乘除操作。

完整代码请看`org.xinghe.algorithm.basics.CalculatorTest.java`。

整体思路是把int转成二进制进行计算。
## 二进制加法
给定的int类型的两个数a和b，实现加法。
思路：两个数相加，就是两个数无进位相加，加上进位信息。
使用异或（^）进行无进位相加，按位与（&）记录进位信息。
如图：
![img_2.png](img_2.png)
代码实现：
```java
    public static int add(int a, int b) {
        // 结果，每一轮计算都会是a和b无进位相加的结果，加上进位信息
        int res = a;
        // 记录进位信息，依次从最低位到最高位的进位信息
        // 进位信息：a & b == 1时有进位;
        while (b != 0) {
            // 无进位相加
            res = a ^ b;
            // 进位信息
            b = a & b;
            // 下一轮计算：进位要放到左边一位上去
            b = b << 1;
            // 下一轮计算：当前结果赋值给a
            a = res;
        }
        return res;
    }
```


## 二进制减法
这个就比较简单了，加上相反数就是了。二进制的相反数就是取反加一。
代码如下：

```java
    public static int minus(int a, int b) {
        return add(a, add(~b, 1)); // a加上b的相反数，b的相反数就是b取反加一
    }
```

## 二进制乘法
思路：a乘以b，实际上就是b个a相加。

### 思路二
模拟十进制乘法。



## 二进制除法
最简单的思路：~~用减法实现。但这样性能会有很大的影响，如果是Integer.MAX_VALUE-1，要处理近3s。~~

思路二：
边界问题不考虑，手动实现即可。
首先记录两个数相除是正数还是负数，然后转换成两个数的绝对值进行计算。最后把计算结果加上符号即可。
仍然沿用上面的思路，不过做一些改进。首先算a的一半够不够b除，如果够则再次算一半够不够。最后汇总结果即可。
例如：a ÷ b
第一步：
```javascript
a = a >> 1;
// 比较a和b的大小
if a > b;
    a = a >> 1;
```
具体例子：
15 ÷ 6
第一步：15 >> 1 = 7
7>6，继续左移
7 >> 1 = 3
所以15只需要左移一个单位就行了

